<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Integrity Checker</title>
</head>
<body>
    <h1>URL Integrity Checker</h1>
    <form id="url-form">
        <label for="url-input">Enter URL:</label>
        <input type="text" id="url-input" required>
        <button type="submit">Check</button>
    </form>
    <div id="result-container"></div>

    <!-- JavaScript -->
    <script>
        const form = document.getElementById('url-form');
        const resultContainer = document.getElementById('result-container');

        form.addEventListener('submit', async function(event) {
            event.preventDefault();
            const url = document.getElementById('url-input').value.trim();
            resultContainer.innerHTML = '<p>Checking...</p>';
            try {
                const result = await checkURLIntegrity(url);
                displayResult(result);
            } catch (error) {
                resultContainer.innerHTML = `<p>Error: ${error.message}</p>`;
            }
        });

        async function checkURLIntegrity(url) {
            // Call VirusTotal API
            const virusTotalResponse = await fetch(`https://www.virustotal.com/api/v3/urls/${encodeURIComponent(url)}`, {
                headers: {
                    'x-apikey': affecd25b067a836e0070ad56c1720cd59308dfd6f05c463f287abee0351b828
                }
            });
            if (!virusTotalResponse.ok) {
                throw new Error('Failed to check with VirusTotal');
            }
            const virusTotalData = await virusTotalResponse.json();

            // Call Abused IP API
            const abusedIPResponse = await fetch(`https://api.abuseipdb.com/api/v2/check?url=${encodeURIComponent(url)}`, {
                headers: {
                    'Key': '3a9c3c6dc846e38017064e8a0004109638533bde1d65ca8f2fc01d5d0bff3c75d47287f7e18ddfb9'
                }
            });
            if (!abusedIPResponse.ok) {
                throw new Error('Failed to check with Abused IP');
            }
            const abusedIPData = await abusedIPResponse.json();

            // Call Metadefender API
            const metadefenderResponse = await fetch(`https://api.metadefender.com/v4/url/${encodeURIComponent(url)}`, {
                headers: {
                    'apikey': 'YOUR_METADEFENDER_API_KEY'
                }
            });
            if (!metadefenderResponse.ok) {
                throw new Error('Failed to check with Metadefender');
            }
            const metadefenderData = await metadefenderResponse.json();

            // Call IPVoid API
            const ipvoidResponse = await fetch(`https://www.ipvoid.com/ip-blacklist-check/api/${encodeURIComponent(url)}/`, {
                method: 'GET',
                headers: {
                    'Accept': 'application/json'
                }
            });
            if (!ipvoidResponse.ok) {
                throw new Error('Failed to check with IPVoid');
            }
            const ipvoidData = await ipvoidResponse.json();

            return {
                virusTotal: virusTotalData.data.attributes.last_analysis_stats,
                abusedIP: abusedIPData.data,
                metadefender: metadefenderData,
                ipvoid: ipvoidData
            };
        }

        function displayResult(result) {
            let html = '<h2>Result</h2>';
            html += '<h3>VirusTotal</h3>';
            html += `<p>Detection ratio: ${result.virusTotal.harmless}/${result.virusTotal.malicious}</p>`;
            html += '<h3>Abused IP</h3>';
            html += '<ul>';
            result.abusedIP.forEach(item => {
                html += `<li>${item.ipAddress}: ${item.abuseConfidenceScore}% confidence</li>`;
            });
            html += '</ul>';
            html += '<h3>Metadefender</h3>';
            html += `<p>Scan result: ${result.metadefender.scan_results.scan_all_result_i}</p>`;
            html += '<h3>IPVoid</h3>';
            html += `<p>Blacklist status: ${result.ipvoid.blacklists}</p>`;
            resultContainer.innerHTML = html;
        }
    </script>
</body>
</html>
